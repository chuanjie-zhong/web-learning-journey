{"version":3,"file":"vue.js","sources":["../../src/util/index.js","../../src/observe/index.js","../../src/state.js","../../src/init.js","../../src/index.js"],"sourcesContent":["export function isObject(data) {\r\n  return typeof data === \"object\" && data !== null;\r\n}\r\n","// 把data中的数据 都使用Object.defineProperty重新定义  es5\r\n// Object.defineProperty 不能兼容IE8 及以下 vue2 无法兼容IE8版本\r\n\r\nimport { isObject } from \"../util/index\";\r\nclass Observer {\r\n  constructor(value) {\r\n    //  vue如果数据的层次较多，需要递归去解析对象的属性，依次增加set和get方法\r\n   if (Array.isArray(value)) {\r\n    //如果是数组的话并不会对索引进行观测，因为会导致性能问题\r\n    //前端开发中很少去操作索引 push shift unshift\r\n\r\n    //如果数组里放的是对象我再监控\r\n    this.observerArray(value)\r\n   } else {\r\n      this.walk(value);//对对象进行观测\r\n   }\r\n  \r\n  }\r\n  observerArray(value){\r\n    value.forEach(key=>observe[key])\r\n  }\r\n  walk(data) {\r\n    let keys = Object.keys(data); //[anme,age,address]\r\n    keys.forEach((key) => {\r\n      defineReactive(data, key, data[key]); //定义响应式数据\r\n    });\r\n  }\r\n}\r\n\r\nfunction defineReactive(data, key, value) {\r\n  observe(value); //通过递归实现深度遍历\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      return value;\r\n    },\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      observe(newValue); // 继续劫持用户设置的值，因为用户设置的值是对象\r\n      value = newValue;\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  let isobj = isObject(data);\r\n  if (!isobj) {\r\n    return;\r\n  }\r\n  return new Observer(data); //用来观测数据\r\n}\r\n","import { observe } from \"./observe/index\";\r\n\r\nexport function initState(vm) {\r\n  let opts = vm.$options;\r\n  console.log(opts);\r\n  // vue的数据来源 属性 方法 数据 计算属性 watch\r\n  // if(opts.props){\r\n  //     initProps(vm)\r\n  // }\r\n  if(opts.props) initProps(vm);\r\n  if(opts.methods) initMethods(vm);\r\n  if(opts.data) initData(vm);\r\n  if(opts.computed) initComputed(vm);\r\n  if(opts.watch) initWatch(vm);\r\n}\r\n\r\nfunction initProps() {}\r\nfunction initMethods() {}\r\nfunction initData(vm) {\r\n    // 数据初始化工作\r\n    let data = vm.$options.data; // 用户传递的data\r\n    data =vm._data= typeof data==='function'?data.call(vm):data;\r\n    // console.log(data)\r\n    // console.log(vm)\r\n    //对象劫持，用户改变了数据 我希望得到通知 ==》 刷新页面\r\n    //MVVM模式 数据变化可以驱动试图变化\r\n\r\n    // Object.defineProperty () 给属性增加get方法和set方法\r\n    observe(data)//响应式原理\r\n}   \r\nfunction initComputed() {}\r\nfunction initWatch() {}\r\n","import {initState} from './state.js'\r\nexport function initMixin(Vue) {\r\n    //初始化流程\r\n    Vue.prototype._init = function (options) {\r\n        // console.log(options)\r\n\r\n        // 数据的劫持\r\n        const vm = this;// vue中使用 this.$options 指代的就是用户传递的属性\r\n        vm.$options = options;\r\n\r\n        //初始化状态\r\n        initState(vm)\r\n    }\r\n}","\r\nimport {initMixin} from './init'\r\n\r\n// Vue核心代码,只是一个Vue的声明\r\nfunction Vue(options) {\r\n    //进行Vue的初始化操作\r\n    this._init(options)\r\n}\r\n// 通过引入文件的方法，给Vue原型添加方法\r\ninitMixin(Vue);\r\nexport default Vue;"],"names":["isObject","data","Observer","value","Array","isArray","observerArray","walk","forEach","key","observe","keys","Object","defineReactive","defineProperty","get","set","newValue","isobj","initState","vm","opts","$options","console","log","props","initProps","methods","initMethods","initData","computed","initComputed","watch","initWatch","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":"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"}